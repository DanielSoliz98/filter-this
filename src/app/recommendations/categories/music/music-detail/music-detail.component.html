<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Musica</ion-title>
    <ion-buttons slot="end" (click)="dismiss()">
      <ion-icon name="close-circle"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content fullscreen>
  <ion-card>
    <ion-card-header class="ion-text-center">
      <ion-card-title >Cancion: {{ music.title }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-grid fixed>
            <ion-row class="ion-align-items-center">
              <ion-col size="4">
                <img src="{{ music.artist.picture_medium }}" />
              </ion-col>
              <ion-col size="8">
                <ion-label class="ion-text-center">
                  <h2>Artista:</h2>
                  <h3>{{ music.artist.name }}</h3>
                </ion-label>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="12">
                <ion-button
                  href="{{ music.artist.link }}"
                  size="small"
                  color="tertiary"
                  >Mas informacion del artista</ion-button
                >
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-item>
          <ion-grid fixed>
            <ion-row class="ion-align-items-center">
              <ion-col size="4">
                <img src="{{ music.album.cover_medium }}" />
              </ion-col>
              <ion-col size="8" class="ion-justify-content-center">
                <ion-label class="ion-text-center">
                  <h2>Album:</h2>
                  <h3>{{ music.album.title }}</h3>
                </ion-label>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-item>
          <ion-label class="ion-text-center">
            <h3>Duracion: {{ music.duration }} seg.</h3>
            <h3>Avance:</h3>
            <audio controls>
              <source src="{{ music.preview }}" type="audio/mp3" />
            </audio>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card *ngIf="musicModel">
    <ion-item *ngIf="user">
      <ion-avatar slot="start">
        <img *ngIf="user.photoURL" [src]="user.photoURL" />
        <img
          *ngIf="!user.photoURL"
          src=".../../../../../../../assets/user.png"
        />
      </ion-avatar>
      <ion-label>
        <h3>Recomendado por:</h3>
        <h2>{{ user.displayName }}</h2>
      </ion-label>
    </ion-item>
    <ion-list>
      <ion-list-header>
        Comentarios
      </ion-list-header>
      <ion-item *ngFor="let comment of musicModel.comments">
        <ion-label>
          <h3>{{ comment.displayName }}</h3>
          <p>{{ comment.comment }}</p>
        </ion-label>
      </ion-item>
      <ion-item *ngIf="!musicModel.comments.lenght > 0">
        <ion-label>
          <p>No hay comentarios aun</p>
        </ion-label>
      </ion-item>
    </ion-list>
  </ion-card>
  <ion-fab *ngIf="!musicModel" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="saveMusicRecommendation()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
